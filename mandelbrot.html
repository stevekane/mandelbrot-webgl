<!DOCTYPE html>
<head>
  <title>Mandelbrot WebGL</title>
  <link rel="stylesheet" type="text/css" href="/styles.css" />
</head>
<body>
  <script type="x-shader" id="vShader">
    precision highp float;

    attribute vec2 a_position;

    void main () {
      gl_Position = vec4(a_position, 0, 1); 
    } 
  </script>

  <script type="x-shader" id="fShader">
    precision highp float;

    uniform vec2 center;
    uniform float scale;

    void main () {
      vec2 z, c;

      c.x = 1.3333 * (gl_FragCoord.x - 0.5) * scale - center.x;
      c.y = (gl_FragCoord.y - 0.5) * scale - center.y;

      int j = 0;
      z = c;
      for (int i = 0; i < 100; i++ ) {
        float x = (z.x * z.x - z.y * z.y) + c.x;
        float y = (z.y * z.x + z.x * z.y) + c.y;

        j = i;
        if ((x * x + y * y) > 4.0) break;
        z.x = x;
        z.y = y;
      }

      float color = j == 100 ? 0.0 : (float(j) / 100.0);

      gl_FragColor = vec4(color, color, 0.3, 1.0);
    }
  </script>

  <canvas id="view"></canvas>
  <script type="text/javascript" src="/gl-utils.js"></script>
  <script type="text/javascript" src="/mandelbrot.js"></script>
</body>
